{% extends "base/base.html" %}
{% load staticfiles %}




{% block extracss %}
<link rel="stylesheet" href="https://fullcalendar.io/releases/core/4.1.0/main.min.css" >
<link rel="stylesheet" href="https://fullcalendar.io/releases/daygrid/4.1.0/main.min.css">
<link rel="stylesheet" href="https://fullcalendar.io/releases/timegrid/4.1.0/main.min.css">
{% endblock %}
{% block extrascripts %}
<script>
        $(document).ready(function(){            
           var endpoint = '/data/'
           var title = []
           var date = []
           $.ajax({
               method: "GET",
               url: endpoint,
               success: function(data)
               {
                   title = data.titulo
                   date = data.fecha
                   console.log(date)
                   console.log(title)
                   setCalendar()
                },
               error: function(error_data){
                   console.log("error")
                   console.log(error_data)
               }
           
           })
           function setCalendar()
           {
          document.addEventListener('DOMContentLoaded', function() {
                var calendarEl = document.getElementById('calendar');

                var calendar = new FullCalendar.Calendar(calendarEl, {
                      plugins: [ 'interaction', 'dayGrid', 'timeGrid','timeline' ],
                      locale:'es',
                      header: {
                      left: 'prev,next today',
                      center: 'title',
                      right: 'dayGridMonth,timeGridWeek,timeGridDay'
                },
                    events: [
                      {
                        title: data.titulo,
                        start: data.fecha
                      },
                      {
                        title: 'Evento largo',
                        start: '2019-05-07',
                        end: '2019-05-10'
                      }
                      ]
                      });
                        calendar.render();

                          
                      });
           }
            })
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://fullcalendar.io/releases/core/4.1.0/main.min.js"></script>
<script src='https://fullcalendar.io/releases/interaction/4.1.0/main.min.js'></script>
<script src='https://fullcalendar.io/releases/daygrid/4.1.0/main.min.js'></script>
<script src='https://fullcalendar.io/releases/timegrid/4.1.0/main.min.js'></script>

<script>
      

    </script>
    
           
{% endblock %}

{% block content %}
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<form id="formulario" method="POST">
                {%csrf_token%}
   <div class="container col-lg-9 col-md-12" url-endpoint='{% url "calendar" %}' id='calendar'></div>
</form>
<br>
<br>
<br>
<br>

{% endblock content %}

